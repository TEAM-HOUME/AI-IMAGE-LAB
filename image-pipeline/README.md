# 🎨 OpenAI 이미지 생성 도구 (React + Vite)

DALL-E 2, DALL-E 3, gpt-image-1을 사용한 이미지 생성 및 인페인팅 웹 애플리케이션

## ✨ 주요 기능

- 🎯 **이미지 생성**: DALL-E 2, DALL-E 3, gpt-image-1 모델 지원
- 🖌️ **인페인팅**: gpt-image-1을 사용한 이미지 수정
- 💰 **비용 계산**: 실시간 OpenAI API 호출 비용 산출
- 📱 **반응형 디자인**: 모바일/데스크톱 지원
- 💾 **로컬 저장**: 생성된 이미지 다운로드
- 🎨 **마스크 도구**: 인페인팅을 위한 브러시 도구
- ⚡ **모던 스택**: React + Vite로 빠른 개발 경험

## 🚀 설치 및 실행

### 필요 조건

- Node.js 16.0.0 이상
- OpenAI API 키

### 1. 프로젝트 클론 또는 다운로드

```bash
# 디렉토리로 이동
cd image-pipeline
```

### 2. 의존성 설치

```bash
npm install
```

### 3. 개발 서버 실행

```bash
# 프론트엔드와 백엔드를 동시에 실행
npm start

# 또는 개별 실행
npm run server  # 백엔드 프록시 서버 (포트 3001)
npm run dev     # 프론트엔드 개발 서버 (포트 5173)
```

### 4. 브라우저에서 접속

- **프론트엔드**: http://localhost:5173
- **백엔드 API**: http://localhost:3001

## 📖 사용법

### 1. API 키 설정

1. OpenAI에서 API 키를 발급받습니다
2. 웹 애플리케이션의 "API 설정" 섹션에 키를 입력합니다
3. "저장" 버튼을 클릭합니다

### 2. 이미지 생성

1. **프롬프트 입력**: 생성하고 싶은 이미지를 자세히 설명합니다
2. **모델 선택**: 
   - DALL-E 2: 빠르고 경제적
   - DALL-E 3: 높은 품질과 자연어 이해력
   - gpt-image-1: 최신 모델, 인페인팅 지원
3. **크기 선택**: 모델에 따라 지원되는 해상도가 다릅니다
4. **품질 선택**: 모델별로 다양한 품질 옵션 제공
5. **이미지 수**: 1-4개 선택 가능
6. "이미지 생성" 버튼 클릭

### 3. 인페인팅 (이미지 수정)

1. **원본 이미지 업로드**: 수정하고 싶은 이미지를 선택합니다 (최대 50MB, PNG/JPEG/WebP 지원)
2. **이미지 크기 선택**: gpt-image-1에서 지원하는 크기 중 선택 (1024x1024, 1536x1024, 1024x1536, auto)
3. **품질 선택**: 원하는 품질 레벨 선택 (auto, low, medium, high)
4. **수정 영역 표시**: 브러시로 수정하고 싶은 부분을 칠합니다
5. **프롬프트 입력**: 해당 영역을 어떻게 바꿀지 설명합니다
6. "인페인팅 실행" 버튼 클릭

### 4. 이미지 다운로드

- 생성된 이미지 하단의 "다운로드" 버튼을 클릭합니다
- 이미지는 PNG 형식으로 저장됩니다

## 💰 비용 정보 (2025년 6월 기준)

### DALL-E 2
- 256x256: $0.016
- 512x512: $0.018
- 1024x1024: $0.020

### DALL-E 3
- 1024x1024 (표준): $0.040
- 1024x1024 (HD): $0.080
- 1024x1536/1536x1024 (표준): $0.080
- 1024x1536/1536x1024 (HD): $0.120

### gpt-image-1
- Low (1024x1024): $0.011
- Medium (1024x1024): $0.042
- High (1024x1024): $0.167

*비용은 이미지 1장 기준이며, OpenAI 공식 가격 정책에 따라 변경될 수 있습니다.*

## 🛠️ 기술 스택

### Frontend
- **React 18** - 컴포넌트 기반 UI 라이브러리
- **Vite** - 빠른 개발 빌드 도구
- **CSS3** - 모던 스타일링 (Flexbox, Grid)
- **Canvas API** - 인페인팅 마스크 그리기

### Backend
- **Node.js** - 서버 런타임
- **Express.js** - 웹 프레임워크
- **Multer** - 파일 업로드 처리
- **CORS** - Cross-Origin 요청 처리

### API
- **OpenAI Images API** - 이미지 생성
- **OpenAI Edit API** - 인페인팅

## 📂 프로젝트 구조

```
image-pipeline/
├── src/
│   ├── components/
│   │   ├── ApiKeySection.jsx      # API 키 입력 섹션
│   │   ├── ImageGenerationSection.jsx  # 이미지 생성 컨트롤
│   │   ├── InpaintingSection.jsx  # 인페인팅 컨트롤
│   │   ├── ImageResults.jsx       # 생성된 이미지 표시
│   │   ├── LoadingSpinner.jsx     # 로딩 스피너
│   │   └── Message.jsx           # 메시지 컴포넌트
│   ├── utils/
│   │   ├── api.js                # API 호출 함수
│   │   └── pricing.js            # 비용 계산 유틸리티
│   ├── App.jsx                   # 메인 App 컴포넌트
│   ├── App.css                   # 애플리케이션 스타일
│   └── main.jsx                  # React 엔트리 포인트
├── server.js                     # Express 프록시 서버
├── package.json                  # 프로젝트 의존성
├── vite.config.js               # Vite 설정
└── README.md                    # 이 파일
```

## ⚙️ 설정 옵션

### 환경 변수

```bash
PORT=3001              # 백엔드 서버 포트 (기본값: 3001)
```

### 개발 스크립트

```bash
npm run dev           # 프론트엔드 개발 서버 실행
npm run server        # 백엔드 프록시 서버 실행
npm run dev:server    # 백엔드 서버 (nodemon 사용)
npm start            # 프론트엔드 + 백엔드 동시 실행
npm run build        # 프로덕션 빌드
npm run preview      # 빌드된 애플리케이션 미리보기
```

### 브러시 설정

- 브러시 크기: 5-50px 조절 가능
- 마스크는 흰색으로 표시됩니다
- 터치 스크린에서도 사용 가능

## 🐛 문제 해결

### CORS 오류

프록시 서버(`server.js`)를 사용하므로 CORS 문제가 해결됩니다. 만약 여전히 문제가 있다면:

1. 백엔드 서버가 정상적으로 실행되고 있는지 확인 (포트 3001)
2. http://localhost:3001/api/health 에서 서버 상태 확인
3. Vite 프록시 설정이 올바른지 확인 (`vite.config.js`)

### API 키 오류

1. OpenAI API 키가 `sk-`로 시작하는지 확인
2. API 키에 충분한 크레딧이 있는지 확인
3. API 키가 이미지 생성 권한을 가지고 있는지 확인

### 인페인팅 문제

1. 이미지 파일이 PNG/JPEG 형식인지 확인
2. 마스크 영역이 충분히 표시되었는지 확인
3. gpt-image-1 모델만 인페인팅을 지원합니다

### 포트 충돌

- 프론트엔드: 5173 포트 (Vite 기본값)
- 백엔드: 3001 포트 (설정 가능)

포트를 변경하려면 `package.json`의 스크립트를 수정하거나 환경 변수를 설정하세요.

---

⚠️ **주의사항**: OpenAI API 사용에는 비용이 발생합니다. 사용 전 반드시 OpenAI의 가격 정책을 확인하세요.
